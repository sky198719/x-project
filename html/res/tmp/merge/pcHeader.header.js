define(["base","tip","dialog"],function(e,o,t){function i(){function i(o){e.xxdAjax({url:"/userCenter/user/beInLogging",clientId:"XXD_FRONT_END",type:"GET",data:{},token:u,callbacks:function(e){"200000"==e.code?o&&o(!0):o&&o(!1)},error:function(){return o&&o(!1),alert("网络异常，请重试！"),!1}})}function n(o){e.xxdAjax({url:"/userCenter/user/userInfoByToken",clientId:"XXD_FRONT_END",type:"GET",data:{},token:u,callbacks:function(e){if("200000"==e.code){var t;0==e.data.code&&(t=e.data.data)&&o&&o(t.usertype)}},error:function(){return alert("网络异常，请重试！"),!1}})}function r(o){e.ajax({type:"GET",url:"/user/logoutJson.html",data:{},contentType:"application/json;charset=UTF-8",dataType:"json",success:function(e){0==e.code&&o&&o(!0)},error:function(){return alert("网络异常，请重试！"),!1}})}function a(e){l(e,"",-1)}function l(e,o,t){var i=new Date,n="."+location.host.split(".").splice(1,3).join(".");i.setTime(i.getTime()+24*t*60*60*1e3),window.document.cookie=e+"="+escape(o)+"; expires="+i.toGMTString()+";path=/;domain="+n}e("#J_productType").on({mouseover:function(){var o=e(this);o.addClass("menu-active")},mouseout:function(){var o=e(this);o.removeClass("menu-active")}}),e(document).delegate(".j_qrCodeTip","mouseover",function(){o.init({self:this,formatCallback:function(e){return"<div class='qr-code-img'><img src='"+e+"' height='100' width='100'  /></div>"}})}),e(document).delegate(".j_weiboTip","mouseover",function(){o.init({self:this,formatCallback:function(e){return"<div class='qr-code-img'><img src='"+e+"' height='100' width='100'  /></div>"}})}),e(document).delegate(".j_qrCodeTip.phone","mouseover",function(){o.init({self:this,formatCallback:function(e){return"<div class='qr-code-img header-code-img'><img src='"+e+"' height='100' width='100'/><span>手机APP下载</span></div>"}})}),e(document).delegate(".j_qrCodeTip.wechat","mouseover",function(){o.init({self:this,formatCallback:function(e){return"<div class='qr-code-img header-code-img'><img src='"+e+"' height='100' width='100'/><span>微信服务号</span></div>"}})});var s,c=e(".j_investDropdown a"),u=e.readCookie("Token");u&&e.xxdAjax({url:"/investmentAPI/home/investStatus",clientId:"XXD_FRONT_END",type:"post",data:{},token:u,callbacks:function(e){s="200000"==e.code&&e.data},error:function(){s=!1}});var d=e(".j_informationDropdown a");e(".j_investDropdown").on("mouseover",function(){o.init({self:this,formatCallback:function(e){var o=[];return s?o.push("<ul class='invest-dropdown'>"):(o.push("<ul class='invest-dropdown'>"),o.push("<li class='hot'><a href='/detail/thirtytender.html'>_（新手专享）</a><i></i></li>")),o.push("<li><a href='/detail/monthgold.html'>_</a></li>"),o.push("<li><a href='/xplan/search/list.html'>_</a></li>"),o.push("<li><a href='/borrow/search/list.html'>散标直投</a></li>"),o.push("<li><a href='/detail/consumptionList.html'>新宜贷</a></li>"),o.push("<li><a href='/traderequest/tradeRequestMoreSearch.html'>债权转让</a></li></ul>"),o.join("")},hideCall:function(){c.removeClass("dropdown-hover")},showCall:function(){c.addClass("dropdown-hover")}})}),e(".j_informationDropdown").on("mouseover",function(){o.init({self:this,formatCallback:function(e){var o="<ul class='invest-dropdown'><li><a href='/html/help/safesecurity.html'>安全保障</a><i></i></li><li><a href='/html/help/datadisclose.html'>平台数据</a></li><li><a href='/html/help/runreports.html'>运营报告</a></li><li><a href='/html/help/qualihonor.html'>荣誉资质</a></li><li><a href='/html/help/compprofile.html'>关于我们</a></li></ul>";return o},hideCall:function(){d.removeClass("dropdown-hover")},showCall:function(){d.addClass("dropdown-hover")}})}),e(document).delegate(".j_userDropdown","mouseover",function(){o.init({self:this,formatCallback:function(e){var o="<ul class='user-dropdown'><li><a href='/usercenter/accountInfo.html'>我的_</a></li><li><a href='/usercenter/recharge.html'>账户充值</a></li><li><a href='/account/message.html'>站内信</a></li></li><li><a href='/user/logout.html'>退出登录</a></li></ul>";return o}})}),e(document).on("click","#J_borrowMoney",function(){i(function(e){e===!0?n(function(e){"2"==e?t({id:"J_dialogBorrow",content:"<div class='dialog-borrow' id='J_dialogTips'><div class='content-tips'><i class='close c_close'></i><h4>提示</h4><p>请重新申请企业用户</p><div class='go-to'><button class='c_confirm' id='J_companyCenter'>前往注册</button></div></div>",confirm:function(){a("Token"),r(function(e){1==e&&(window.location.href="/usercenter/company/register.html")})},cancel:function(e){e.close()}}):window.location.href="/borrowApply/toBorrowPage.html"}):window.location.href="/borrowApply/toBorrowPage.html"})})}return{init:i}});