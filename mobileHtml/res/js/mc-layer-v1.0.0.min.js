/*! mcLayer v1.0.0 | (c) Junbo | http://webmcui.com/plugins 请和mc-layer.css配合使用*/
define(function(){var b={v:{h:0,am:"aa"},f:function(c,f){var a=c.close||".x_layer";$(f).on("click",a,function(){b.x(c)})},o:function(d){$(".mc-layer").detach();var f=d.id?d.id:"mc-layer",c=d.am?"am-show-"+d.am:"am-show-aa",a=d.fix?d.fix:"body",e=$(document).scrollTop(),g="translateY(-"+e+"px)";$(a).addClass("layer-ban").css("transform",g);setTimeout(function(){var n=$("<div id="+f+' class="mc-layer"><div class="mc-layer-box"><div class="loading"></div></div></div>');var i=$(n).find(".mc-layer-box");var j={};if(d.x){if(d.x.cb){j={am:d.am,cb:d.x.cb};if(d.x.am){j={am:d.x.am,cb:d.x.cb}}}}else{j={am:d.am}}b.f(j,n);$("body").append(n);var l=$('<div class="mc-layer-pop">嘻嘻，你没有载入内容呢!</div>'),h=null;if(d){if(d.url){var k=window.XMLHttpRequest?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP");k.open("GET",d.url,true);k.onreadystatechange=function(){if(this.readyState===4){if(this.status>=200&&this.status<400){l=h=$(this.responseText);d.before&&d.before(l);$(i).html(l).addClass(c)}else{l=$('<div class="mc-layer-pop">哎呀，内容载入失败了呢!</div>');d.before&&d.before(l);$(i).html(l).addClass(c);setTimeout(function(){b.x(j)},2000)}var m=setInterval(function(){if(h){clearInterval(m);d.cb&&d.cb(n)}},100)}};k.send();k=null}else{if(d.code){l=$(d.code);d.before&&d.before(l);$(i).html(l).addClass(c)}else{d.before&&d.before(l);$(i).html(l).addClass(c);setTimeout(function(){b.x(j)},2000)}}}else{$(n).html(l);setTimeout(function(){b.x(j)},2000)}b.v.h=e;b.v.am=d.am?d.am:"aa"},50)},x:function(c){var a="am-hide-aa";if(c){if(c.am){a="am-hide-"+c.am}else{a=b.v.am}}$(".mc-layer-box").addClass(a);setTimeout(function(){$(".mc-layer").fadeOut(200);setTimeout(function(){$(".mc-layer").detach();$(".layer-ban").removeClass("layer-ban").removeAttr("style");$(document).scrollTop(b.v.h);if(c){if(c.cb){c.cb()}else{if(c.x&&c.x.cb){c.x.cb()}}}},200)},300)}};return b});