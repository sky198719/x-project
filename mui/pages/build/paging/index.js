define(["base","pagingTpl","juicer"],function(a,e,t){function n(a){function e(){}e.prototype=s,(new e).init(a)}var s={init:function(e){console.log("init");var t=parseInt(e.total,10),n=parseInt(e.pageSize,10),s=parseInt((t+n-1)/n),g=this;this.changePage(e);var i=e;e.$dom.delegate(".j_firstPage , .j_prvPage , .j_changePage ,.j_nextPage ,.j_lastPage","click",function(){console.log(i),console.log("delegate");var e=1,t=a(this),n=g.pagingObj,r=parseInt(n.pageIndex);if(t.hasClass("j_firstPage"))e=1==r?-1:1;else if(t.hasClass("j_prvPage"))e=r>1?r-1:-1;else if(t.hasClass("j_changePage")){var l=t.find("a").html();e=l==r?-1:l}else t.hasClass("j_nextPage")?e=r>=s?-1:r+1:t.hasClass("j_lastPage")&&(e=r>=s?-1:s);if(e>0){n.pageIndex=e,g.changePage(n);var o;n&&(o=n.callback)&&o(n)}})},changePage:function(a){this.pagingObj=a;var t=parseInt(a.total),n=parseInt(a.pageSize),s=parseInt(a.pageIndex),g=parseInt((t+n-1)/n),i=a.$dom,r=g>5?5:g,l=1,o=parseInt((r+1)/2);g<=5||s<o?l=1:s+o>g?l=g-5+1:l=s-o+1;for(var p=[],c=0;c<r;c++)p.push(l+c);if(g>0){var h=juicer.to_html(e,{total:t,totalPage:g,itemArray:p,currentIndex:s});i.html(h)}else i.html("")}};return n});