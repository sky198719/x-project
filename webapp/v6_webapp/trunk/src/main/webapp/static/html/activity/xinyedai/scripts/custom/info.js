require.config({paths:{common:"../common/common"}}),require(["common"],function(e){function a(){$.ajax({url:ajaxlink+"dic/getAllAreaByPcode.do"+extra,type:"get",dataType:"jsonp",jsonp:"jsonpcallback",data:{pcode:$("#cityBox1").find(".current").attr("value")},success:function(a){0==a.resultCode?($("#cityBox2").find("ul").empty(),$.each(a.data,function(e,a){0==e?$("#cityBox2").find("ul").append('<li class="current" value="'+a.code+'">'+a.name+"</li>"):$("#cityBox2").find("ul").append('<li value="'+a.code+'">'+a.name+"</li>")}),$("#cityBox2").scrollTop(0)):e.alertBox(a.msg)},error:function(){e.alertBox("网络异常请重试")}})}e.headerLoad("基本信息",2,!0,"index.html",!1,""),e.simSelect("#cityName","#cityNameBox"),e.simSelect("#marriage","#marriageBox"),e.simSelect("#houseType","#houseTypeBox"),e.scrollConfirm("#cityNameBox","#cityName"),e.scrollConfirm("#marriageBox","#marriage"),e.scrollConfirm("#houseTypeBox","#houseType"),e.simRadio("#identity"),e.simRadio("#houseProperty"),$("#houseProperty").find("span").on("click",function(){1==$(this).index()?$("#houseType").show():$("#houseType").hide()}),$("#cityBox1").scroll(function(){a()}),$.ajax({url:ajaxlink+"dic/getAllSuppProvinces.do"+extra,type:"get",dataType:"jsonp",jsonp:"jsonpcallback",success:function(i){0==i.resultCode?($.each(i.data,function(e,a){0==e?$("#cityBox1").find("ul").append('<li class="current" value="'+a.code+'">'+a.name+"</li>"):$("#cityBox1").find("ul").append('<li value="'+a.code+'">'+a.name+"</li>")}),a()):e.alertBox(i.msg)},error:function(){e.alertBox("网络异常请重试")}}),$.ajax({url:ajaxlink+"borrowApply/queryXydBaseInfo.do"+extra,type:"get",dataType:"jsonp",jsonp:"jsonpcallback",success:function(a){0==a.resultCode?($("#name").find("input").attr("value",a.data.name),void 0==a.data.identity?$("#identity").find("span").removeClass("active").eq(0).addClass("active"):$("#identity").find("span").removeClass("active").eq(parseInt(a.data.identity)-1).addClass("active"),void 0==a.data.cityName||void 0==a.data.areaName?($("#cityName").find("div").html("选择您的居住城市"),$("#cityName").find("div").attr("value",""),$("#cityName").find("div").attr("alt","")):($("#cityName").find("div").html(a.data.areaName+" "+a.data.cityName),$("#cityName").find("div").attr("value",a.data.areaId),$("#cityName").find("div").attr("alt",a.data.cityId),$("#cityName").find("div").addClass("active")),void 0==a.data.marriage?($("#marriage").find("div").html($("#marriageBox").find("li").eq(0).html()),$("#marriage").find("div").attr("value","1"),$("#marriage").find("div").addClass("active")):($("#marriage").find("div").html($("#marriageBox").find("li").eq(parseInt(a.data.marriage)-1).html()),$("#marriage").find("div").attr("value",a.data.marriage),$("#marriage").find("div").addClass("active")),$("#idCode").find("input").attr("value",a.data.idCode),$("#monthlyIncome").find("input").attr("value",a.data.income),void 0==a.data.houseProperty?$("#houseProperty").find("span").removeClass("active").eq(0).addClass("active"):2==a.data.houseProperty?($("#houseProperty").find("span").removeClass("active").eq(parseInt(a.data.houseProperty)-1).addClass("active"),$("#houseType").hide()):$("#houseProperty").find("span").removeClass("active").eq(parseInt(a.data.houseProperty)-1).addClass("active"),void 0==a.data.houseType?($("#houseType").find("div").html($("#houseTypeBox").find("li").eq(0).html()),$("#houseType").find("div").attr("value","1"),$("#houseType").find("div").addClass("active")):($("#houseType").find("div").html($("#houseTypeBox").find("li").eq(parseInt(a.data.houseType)-1).html()),$("#houseType").find("div").attr("value",a.data.houseType),$("#houseType").find("div").addClass("active"))):e.alertBox(a.msg)},error:function(){e.alertBox("网络异常请重试")}}),$(".formBox").find("button").on("click",function(){var a="";if(0==e.emptyInspect("#name")&&0==e.emptyInspect("#cityName")&&0==e.emptyInspect("#marriage")&&0==e.emptyInspect("#idCode")&&0==e.emptyInspect("#idCode")&&0==e.idInspect("#idCode")&&0==e.emptyInspect("#monthlyIncome")&&0==e.numberInspect("#monthlyIncome")){if($("#monthlyIncome").find("input").val()<=0)return e.alertBox("税前月收入不能为零！"),!1;2==$("#houseProperty").find(".active").attr("value")?(a="fail.html",e.ajaxSubmit(ajaxlink+"borrowApply/saveXydBaseInfo.do"+extra,{name:$("#name").find("input").val(),identity:$("#identity").find(".active").attr("value"),areaId:$("#cityName").find("div").attr("value"),cityId:$("#cityName").find("div").attr("alt"),marriage:$("#marriage").find("div").attr("value"),idCode:$("#idCode").find("input").val(),income:$("#monthlyIncome").find("input").val(),houseProperty:$("#houseProperty").find(".active").attr("value"),houseType:$("#houseType").find("div").attr("value")},a)):0==e.emptyInspect("#houseType")&&(1==$("#houseType").find("div").attr("value")?$.fn.cookie("upLoadType","0",{expires:7}):2==$("#houseType").find("div").attr("value")?$.fn.cookie("upLoadType","1",{expires:7}):$.fn.cookie("upLoadType","2",{expires:7}),1==$("#identity").find(".active").attr("value")?(a="applyPerson.html",$.fn.cookie("borrowType","0",{expires:7}),$.fn.cookie("monthlyIncome",$("#monthlyIncome").find("input").val(),{expires:7})):(a="applyCompany.html",$.fn.cookie("borrowType","1",{expires:7}),$.fn.cookie("monthlyIncome",$("#monthlyIncome").find("input").val(),{expires:7})),e.ajaxSubmit(ajaxlink+"borrowApply/saveXydBaseInfo.do"+extra,{name:$("#name").find("input").val(),identity:$("#identity").find(".active").attr("value"),areaId:$("#cityName").find("div").attr("value"),cityId:$("#cityName").find("div").attr("alt"),marriage:$("#marriage").find("div").attr("value"),idCode:$("#idCode").find("input").val(),income:$("#monthlyIncome").find("input").val(),houseProperty:$("#houseProperty").find(".active").attr("value"),houseType:$("#houseType").find("div").attr("value")},a))}})});